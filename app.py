'''
Python 3
Software Engineering
Written By: Nadia Morrow
Date Last Updated: 24/04/2024
This program creates the routes between the webpages and connects the algorithm to the web application.
'''

#importing neccessary libraries
from codecs import StreamReader
from operator import index
from re import A, template
from flask import Flask, render_template, request, g, session, flash, redirect, abort
import pandas as pd
import algorithm
from pysteamsignin.steamsignin import SteamSignIn
import os, sys
from steam.webapi import WebAPI
import json
import collections

#creating the web application
app = Flask(__name__, template_folder='templates')

#Creating the route to the home page 
@app.route("/")
def home():
    return render_template("/welcomePlus/index.html")

#created the route for the manual page
@app.route("/manualLogin", methods=['POST', 'GET'])
def manualLogin():
    #checks if the web page is asking and if so provides the list of games as an imput
    if request.method == 'GET':
        Game = ['The Elder Scrolls V Skyrim', 'Fallout 4', 'Spore', 'Fallout New Vegas', 'Left 4 Dead 2', 'Path of Exile', 'Left 4 Dead', 'The Banner Saga', 'BioShock Infinite', 'Grand Theft Auto IV', 'Dota 2', 'BioShock', 'Jazzpunk', 'Alan Wake', 'BioShock 2', 'Hitman Absolution', "Sid Meier's Civilization V", 'Company of Heroes Tales of Valor', 'Divekick', 'Orcs Must Die! 2', 'Killing Floor', 'Company of Heroes', 'Bastion', 'Undertale', 'Counter-Strike Global Offensive', 'Orcs Must Die!', "Assassin's Creed II", 'Company of Heroes Opposing Fronts', 'Psychonauts', 'Company of Heroes 2', 'Magicka', 'Natural Selection 2', 'Sanctum 2', 'Serious Sam 3 BFE', 'Grand Theft Auto V', 'Insurgency', 'S.T.A.L.K.E.R. Shadow of Chernobyl', 'S.T.A.L.K.E.R. Call of Pripyat', 'Saints Row The Third', 'Far Cry 3', 'S.T.A.L.K.E.R. Clear Sky', 'Rocket League', 'Prototype', 'Dying Light', 'Just Cause 2', "Mirror's Edge", 'Portal 2', 'Deus Ex Human Revolution', 'Middle-earth Shadow of Mordor', 'Tropico 4', 'F.E.A.R.', 'South Park The Stick of Truth', 'Saints Row IV', 'Half-Life 2', 'The Talos Principle', 'DiRT 3', 'FTL Faster Than Light', 'Gunpoint', 'Metro 2033', "Assassin's Creed III", 'Far Cry 3 Blood Dragon', 'Burnout Paradise The Ultimate Box', 'Rogue Legacy', 'From Dust', 'Nidhogg', 'Dishonored', 'Half-Life 2 Episode One', 'Wolfenstein The New Order', 'Metro Last Light', 'Miasmata', 'Hotline Miami', 'Crypt of the NecroDancer', 'F.E.A.R. 2 Project Origin', 'The Binding of Isaac', 'METAL GEAR RISING REVENGEANCE', 'The Vanishing of Ethan Carter', 'Mass Effect', 'METAL GEAR SOLID V GROUND ZEROES', 'Banished', 'Battlestations Midway', 'HOARD', 'Sunless Sea', 'Grow Home', 'FEZ', 'Borderlands 2', 'Shadowgrounds', 'Trine', 'Symphony', 'Far Cry 2', 'The Stanley Parable', 'Osmos', 'Oil Rush', 'Dark Souls Prepare to Die Edition', 'Gravity Ghost', 'Rock of Ages', 'Amnesia The Dark Descent', 'Frozen Synapse', 'Dead Island', 'Superbrothers Sword & Sworcery EP', 'GRID 2', 'Strike Vector', 'Prison Architect', 'Outlast', 'Valkyria Chronicles', 'Proteus', 'Spelunky', "Tom Clancy's Splinter Cell Chaos Theory", 'Need for Speed Hot Pursuit', 'Reus', 'Saints Row 2', 'Super Meat Boy', 'Dustforce', 'System Shock 2', 'And Yet It Moves', 'Battlefield Bad Company 2', 'Call of Duty Modern Warfare 2', '140', 'Alice Madness Returns', 'Amnesia A Machine for Pigs', 'Anachronox', 'Antichamber', 'Audiosurf', 'Beat Hazard', 'Betrayer', 'Borderlands', 'Braid', 'Bulletstorm', 'Capsized', 'Cities Skylines', 'Dead Island Riptide', 'Dead Space 2', 'Dear Esther', 'Deus Ex Invisible War', 'Devil May Cry 4', 'DmC Devil May Cry', 'E.Y.E Divine Cybermancy', 'Endless Space', 'F.E.A.R. 3', 'F.E.A.R. Extraction Point', 'F.E.A.R. Perseus Mandate', 'Fallout 3', 'Far Cry', 'Gods Will Be Watching', 'Gone Home', 'Gothic', 'Gothic 3', 'GRID', 'Half-Life', 'Hitman 2 Silent Assassin', 'Hitman Blood Money', 'Hitman Codename 47', 'Hitman Contracts', 'How to Survive', 'I am Bread', 'Just Cause', 'Kane & Lynch 2 Dog Days', 'Kerbal Space Program', 'Kingdoms of Amalur Reckoning', 'Lara Croft and the Guardian of Light', 'LEGO Batman The Videogame', 'LIMBO', 'Little Inferno', 'Mass Effect 2', 'Mercenary Kings', 'Mini Ninjas', 'MURDERED SOUL SUSPECT', 'PAYDAY 2', 'POSTAL 2', 'RAGE', 'Red Faction Armageddon', 'Rochard', 'Scribblenauts Unlimited', 'Shadowrun Returns', 'Shadow Warrior', 'Shank', 'Sins of a Solar Empire Rebellion', 'Star Wars Knights of the Old Republic', 'Star Wars The Force Unleashed II', 'Star Wars Jedi Knight Jedi Academy', 'Star Wars Republic Commando', 'Star Wars Starfighter', 'Syberia', 'Terraria', "The Beginner's Guide", 'The Binding of Isaac Rebirth', 'The Incredible Adventures of Van Helsing II', 'The Last Remnant', 'The Lord of the Rings War in the North', 'The Swapper', 'The Witcher 3 Wild Hunt', 'Thief', 'This War of Mine', 'Thomas Was Alone', 'Titan Quest', 'Titan Quest Immortal Throne', 'Torchlight', 'Total War SHOGUN 2', 'Transistor', 'Dungeon Defenders', 'Call of Duty Black Ops', 'Day of Defeat Source', 'Empire Total War', 'ARK Survival Evolved', 'TERA', 'Rust', 'Loadout', 'Neverwinter', 'Warframe', 'Max Payne 2 The Fall of Max Payne', 'Mafia II', 'Europa Universalis III', 'Painkiller Overdose', 'Batman Arkham Origins', 'Enclave', 'Machinarium', 'X2 The Threat', 'X3 Reunion', 'X Beyond the Frontier', 'Hotline Miami 2 Wrong Number', 'Deadpool', 'Counter-Strike Condition Zero', 'Counter-Strike', 'Mount & Blade Warband', 'SMITE', 'Infinite Crisis', 'Half-Life Blue Shift', 'Project CARS', 'Defense Grid The Awakening', 'Ghostbusters The Video Game', 'Quantum Conundrum', "Alan Wake's American Nightmare", 'The Ball', 'Torchlight II', 'Botanicula', 'Penumbra Overture', 'Costume Quest 2', 'Midnight Club II', 'RoboBlitz', 'The Elder Scrolls III Morrowind', 'Worms Reloaded', 'FlatOut Ultimate Carnage', 'Sherlock Holmes Nemesis', 'Bejeweled 3', 'The Book of Unwritten Tales', 'The Movies', 'Bully Scholarship Edition', 'Indigo Prophecy', 'Aura Fate of the Ages', 'Penumbra Black Plague', 'Puzzle Agent', 'Octodad Dadliest Catch', 'TRAUMA', 'Plain Sight', 'Trine 2', 'Blur', 'Zeno Clash', 'The Longest Journey', "Sid Meier's Civilization IV", 'Prince of Persia', 'Aliens vs. Predator', 'Darksiders II', 'Dreamfall The Longest Journey', 'Driver San Francisco', 'Forge', 'Hard Reset', 'Helldorado', 'Homefront', 'Jurassic Park The Game', 'Kane & Lynch Dead Men', 'Legend of Grimrock', 'Papo & Yo', 'Secret Files Tunguska', "Sid Meier's Civilization IV Beyond the Sword", "Sid Meier's Civilization IV Warlords", 'Sniper Ghost Warrior', 'Still Life', 'Supreme Commander 2', 'The Chronicles of Riddick Assault on Dark Athena', 'The Novelist', 'Tomb Raider Anniversary', 'Tomb Raider Chronicles', 'Tomb Raider Legend', "Tom Clancy's Splinter Cell Conviction", 'Vampire The Masquerade - Bloodlines', 'Wolfenstein', 'H1Z1', 'Commandos 3 Destination Berlin', 'Battlefield Bad Company 2 Vietnam', 'Tribes Ascend', 'Velvet Assassin', 'Napoleon Total War', 'Aion', 'Arma 3', 'Blacklight Retribution', 'Red Orchestra Ostfront 41-45', 'Stronghold 3', 'R.U.S.E.', 'Anomaly Warzone Earth', 'XCOM Enemy Unknown', 'PlanetSide 2', "Don't Starve", 'Batman Arkham City', 'EVE Online', 'Anno 2070', 'Achron', 'Halo Spartan Assault', 'Dungeon Siege', 'Alpha Protocol', 'BRINK', 'Crysis', 'Crysis Warhead', 'Darkspore', 'Deus Ex Human Revolution - The Missing Link', 'Dungeon Siege III', 'Grand Theft Auto San Andreas', 'Grand Theft Auto Vice City', 'Grand Theft Auto III', 'Overlord', 'Red Faction', 'Red Faction II', "Tom Clancy's Ghost Recon Advanced Warfighter 2", 'Two Worlds II', 'Medieval II Total War', 'Defiance', 'Startopia', 'Call of Duty Modern Warfare 3', 'Battlefield 2', 'Men of War', 'Wargame European Escalation', 'Full Spectrum Warrior', 'DiRT Rally', 'Men of War Vietnam', 'XCOM Enemy Within', 'Tropico 5', 'Section 8', 'The Forest', 'Firefall', 'Football Manager 2013', 'Age of Empires Online', 'Champions Online', 'EverQuest II', 'Puzzle Pirates', 'Star Trek Online', 'Medieval II Total War Kingdoms', 'LEGO Jurassic World', 'Gotham City Impostors', 'Galactic Civilizations III', 'Total War ATTILA', 'Endless Legend', 'Homeworld Remastered Collection', 'Darwinia', 'RISK Factions', 'Crusader Kings II', 'Supreme Commander Forged Alliance', 'Europa Universalis IV', 'Earth 2160', 'Wargame AirLand Battle', 'Among the Sleep', 'SiN Episodes Emergence', 'DOOM 3 Resurrection of Evil', 'DOOM 3', "Sid Meier's Civilization V Brave New World", 'Supreme Commander', 'Total War SHOGUN 2 - Fall of the Samurai', 'Wasteland 2', 'Sniper Ghost Warrior 2', "Sid Meier's Civilization Beyond Earth", 'Thief Deadly Shadows', 'Magicka Wizard Wars', 'Fable III', 'The Escapists', 'Commandos 2 Men of Courage', 'Lords Of The Fallen', 'Space Hulk', 'Lost Planet Extreme Condition', 'Trials Fusion', 'Magic The Gathering - Duels of the Planeswalkers', 'War of the Roses', 'Rome Total War', "Tom Clancy's Rainbow Six 3 Athena Sword", 'Football Manager 2012', 'Football Manager 2015', 'F1 2012', 'Dragon Age Origins', 'Borderlands The Pre-Sequel', 'Prince of Persia The Forgotten Sands', 'Prince of Persia The Sands of Time', 'Elite Dangerous', 'StarDrive 2', 'Offworld Trading Company', 'Football Manager 2014', 'Test Drive Unlimited 2', 'Stronghold 2', 'Stronghold Legends', 'FINAL FANTASY XI', "Tom Clancy's Rainbow Six Siege", "Tom Clancy's Rainbow Six Vegas", 'Shovel Knight', 'Styx Master of Shadows', 'Shift 2 Unleashed', 'Guild Wars', 'Legacy of Kain Defiance', 'Legacy of Kain Soul Reaver 2', 'Worms Blast', 'Poker Night 2', 'Serious Sam HD The First Encounter', 'Risen', 'Painkiller Hell & Damnation', 'Minimum', 'Strike Suit Zero', 'FlatOut 2', 'Call of Cthulhu Dark Corners of the Earth', 'Demigod', 'DiRT', 'FlatOut', 'Mafia', 'Quake 4', 'The Darkness II', 'The Political Machine', 'Prime World', 'Strider', 'Dungeons & Dragons Chronicles of Mystara', "King's Bounty The Legend", 'Leviathan Warships', 'God Mode', 'SOMA', 'Retrovirus', 'Fallout 2', 'Call of Duty World at War', 'Dead Rising 2', 'The Bureau XCOM Declassified', 'Before the Echo', 'Divinity Dragon Commander', 'GRID Autosport', 'Bionic Commando Rearmed', 'Blackguards', 'Blackguards 2', 'Citizens of Earth', 'Lost Planet 3', 'Max Payne', 'Operation Flashpoint Dragon Rising', 'Operation Flashpoint Red River', 'Prince of Persia The Two Thrones', 'Prince of Persia Warrior Within', 'Rise of the Argonauts', 'X-COM Enforcer', 'Call of Duty 4 Modern Warfare', 'Space Hack', "Baldur's Gate Enhanced Edition", "Baldur's Gate II Enhanced Edition", 'Redshirt', 'Hearts of Iron III', 'Cities in Motion', 'Mount & Blade', 'The Incredible Adventures of Van Helsing', 'Street Fighter IV', "Sid Meier's Railroads!", 'World in Conflict Soviet Assault', 'Space Empires V', 'World in Conflict', 'Bejeweled Twist', 'Just Cause 3', 'Warhammer End Times - Vermintide', 'IL-2 Sturmovik Cliffs of Dover', 'Sniper Elite', 'Divinity Original Sin', 'Dungeon of the Endless', "Tom Clancy's EndWar", 'Guild of Dungeoneering', "Sid Meier's Starships", 'Evil Genius', 'Pillars of Eternity', 'Nosferatu The Wrath of Malachi', 'Judge Dredd Dredd vs Death', 'Titan Souls', 'Bionic Commando', 'Call of Juarez Bound in Blood', 'CONSORTIUM', 'Dark Void', 'Duke Nukem Manhattan Project', 'Eldritch', 'Jade Empire Special Edition', 'KickBeat Steam Edition', 'Knock-knock', 'Magrunner Dark Pulse', 'Q.U.B.E.', 'Return to Castle Wolfenstein', 'Rise of the Triad', "Sid Meier's Civilization IV Colonization", 'To the Moon', 'Lucius', "Hunted The Demon's Forge", 'Beyond Good & Evil', 'Bound By Flame', 'Contrast', 'Runaway The Dream of the Turtle', 'Disciples III Renaissance', 'Age of Wonders III', 'Lichdom Battlemage', 'Age of Wonders Shadow Magic', 'Hostile Waters Antaeus Rising', 'The Secret World', 'Darkest Dungeon', 'Xenonauts', "Tom Clancy's Rainbow Six Vegas 2", 'Medal of Honor Airborne', 'Condemned Criminal Origins', 'Earth Defense Force Insect Armageddon', 'Call of Juarez The Cartel', 'City of Heroes', 'Quake III Team Arena', "Tom Clancy's Ghost Recon Advanced Warfighter", 'X-Blades', 'Eurofighter Typhoon', 'Call of Duty 2', 'F1 2013', 'World War III Black Gold', 'Grim Dawn', 'Subnautica', 'Battlestations Pacific', 'FINAL FANTASY XIV Heavensward', 'World War II Panzer Claws', 'Devil May Cry 3 Special Edition', 'Lost Planet 2', 'Call of Duty', 'Call of Duty United Offensive', 'DeathSpank', 'Warhammer Online Age of Reckoning', 'Hatoful Boyfriend', 'Grey Goo', 'Beyond Divinity', 'Divine Divinity', 'Grim Fandango Remastered', "Sid Meier's Civilization Beyond Earth - Rising Tide", 'Silent Hill Homecoming', 'NBA 2K9', 'A Bird Story', 'Krater', 'Unreal II The Awakening', 'Unreal Tournament 2004', 'DeathSpank Thongs Of Virtue', "Tom Clancy's Splinter Cell", "Tom Clancy's Splinter Cell Double Agent", 'Universe at War Earth Assault', 'Alien Shooter Vengeance', 'Railroad Tycoon 3', 'DarkStar One', 'Grand Ages Rome', 'Tropico', 'Tropico 2 Pirate Cove', 'Order of War', 'StarDrive', 'Her Story', 'The Magic Circle', 'Hand Of Fate', 'MASSIVE CHALICE', 'Mushroom 11', 'Unstoppable Gorg', 'Shadowrun Hong Kong', 'Apotheon', 'Anomaly 2', 'Earth 2150 Lost Souls', 'Guild Wars Nightfall', 'Marine Sharpshooter II Jungle Warfare', 'Layers of Fear', 'Section 8 Prejudice', 'Fahrenheit Indigo Prophecy Remastered', 'Dragon Age II', "Brothers in Arms Hell's Highway", 'Arx Fatalis', 'TowerFall Ascension', 'UFO Afterlight', 'Theatre of War', 'Sacred 3', 'Daylight', 'Manhunt', 'Enemy Territory Quake Wars', 'Empires Dawn of the Modern World', 'ShootMania Storm', 'Cossacks II Napoleonic Wars', 'American Conquest', 'Cossacks Back to War', 'Cossacks European Wars', 'Knights of Honor', 'Act of War Direct Action', 'Call of Juarez', 'Dawn of Discovery', 'Faces of War', 'Gray Matter', 'Imperial Glory', 'Praetorians', 'NBA 2K13', 'The Amazing Spider-Man 2', 'The Path', 'Assault Android Cactus', 'Silent Hunter III', 'Freedom Force', 'Infernal', 'Project Snowblind', 'Rogue Trooper', 'Choplifter HD', 'Dungeons 2', 'Comanche 4', 'Silverfall', 'East India Company', 'Heroes Over Europe', 'Pacific Storm Allies', 'Pacific Storm', 'A Valley Without Wind', 'Incoming Forces', 'Crysis 2', 'Batman Arkham Asylum', 'Frontlines Fuel of War', 'TimeShift', 'Slender The Arrival', 'AquaNox', 'AquaNox 2 Revelation', 'Descent 3', 'Blood Bowl 2', 'The UnderGarden', 'Tycoon City New York', 'Chrome', 'Post Mortem', 'Still Life 2', 'The Flame in the Flood', 'Resonance', 'Your Doodles Are Bugged!', 'Summoner', "Shad'O", 'Foul Play', 'Shadowgate', 'Cities XL', 'Shattered Union', 'Anno 2205', 'Fantasy Wars', "Chris Sawyer's Locomotion", 'The Golf Club', 'Thunder Wolves', 'Stubbs the Zombie in Rebel Without a Pulse', 'BloodRayne', 'BloodRayne 2', 'O.R.B.', 'The Masterplan', 'Ashes of the Singularity', 'Silent Storm', "Tom Clancy's Rainbow Six Lockdown", 'The Settlers 7 Paths to a Kingdom', 'Age of Conan Rise of the Godslayer', 'Arma Combat Operations', 'Blazing Angels Squadrons of WWII', 'Loki', 'Silent Hunter 5 Battle of the Atlantic', 'EverQuest II Rise of Kunark', 'Legends of Eisenwald', 'Warrior Kings Battles', 'Brothers in Arms Earned in Blood', 'Brothers in Arms Road to Hill 30', 'LEGO Indiana Jones The Original Adventures', 'Elven Legacy', 'Etherlords II', 'Etherlords', 'Blacklight Tango Down', 'Microsoft Flight', 'Road Not Taken', 'Blade Kitten', 'Safecracker The Ultimate Puzzle Adventure', 'Venetica', 'Impossible Creatures', 'Watchmen The End Is Nigh', 'Nexus The Jupiter Incident', 'Silent Hunter Wolves of the Pacific', "Clive Barker's Jericho", 'UFO Aftermath', 'Port Royale 2', 'Echelon', 'Dracula 3 The Path of the Dragon', 'Dracula The Resurrection', 'Heroes of Annihilated Empires', "Tom Clancy's Ghost Recon", "Tom Clancy's Ghost Recon Desert Siege", "Tom Clancy's Ghost Recon Island Thunder", 'The Club', 'Treasure Planet Battle at Procyon', 'Advent Rising', 'Death to Spies', 'Death Track Resurrection', 'NecroVisioN', 'Soulbringer', 'Delta Force Black Hawk Down - Team Sabre', 'Delta Force Black Hawk Down', 'Pro Evolution Soccer 2014', 'SpellForce 2 Shadow Wars', 'FLOCK!', 'Puzzle Quest 2', 'UFO Aftershock', 'Blazing Angels 2 Secret Missions of WWII', 'NBA 2K11', 'GUN', 'Armello', 'Dangerous Waters', 'Halo Spartan Strike', 'Pro Evolution Soccer 2013', 'Lords of the Realm III', 'Puzzle Quest Galactrix', 'Shadow Ops Red Mercury', 'Jack Keane', 'Escape Dead Island', 'Space Siege', 'A Vampyre Story', 'Kohan Immortal Sovereigns', 'Worldwide Soccer Manager 2009', 'Kohan II Kings of War', 'Space Colony']
        return render_template(r"register-19.html", game = Game)
    #checks if the web page is sending information and takes the information to put into the algorithm to recieve the recommendation then sends user to results page
    if request.method == 'POST':
        game = request.form['games']
        pred = algorithm.getUserInput(game)
        g1 = pred[0]
        g2 = pred[1]
        return render_template('results.html', game1 = g1, game2 = g2)

#routes to the api login page
@app.route("/apiLogin")
def apiLogin():
    return render_template(r"login-19.html")

#routes to the steam website to get user information
@app.route("/login")
def steamLogin():
    steamLogin = SteamSignIn()
    return(steamLogin.RedirectUser(steamLogin.ConstructURL('https://localhost:8080/processlogin')))

#intermediate page that gets the data from the steam page, calls the api and gets the user top game then sends it to the algorithm to get recommendation games
@app.route("/processlogin")
def process():
    returnData = request.values   
    steamLogin = SteamSignIn()
    steamID = steamLogin.ValidateResults(returnData) #ensures that the information came back properly
    print('SteamID returned is: ', steamID)
    Game = ['The Elder Scrolls V Skyrim', 'Fallout 4', 'Spore', 'Fallout New Vegas', 'Left 4 Dead 2', 'Path of Exile', 'Left 4 Dead', 'The Banner Saga', 'BioShock Infinite', 'Grand Theft Auto IV', 'Dota 2', 'BioShock', 'Jazzpunk', 'Alan Wake', 'BioShock 2', 'Hitman Absolution', "Sid Meier's Civilization V", 'Company of Heroes Tales of Valor', 'Divekick', 'Orcs Must Die! 2', 'Killing Floor', 'Company of Heroes', 'Bastion', 'Undertale', 'Counter-Strike Global Offensive', 'Orcs Must Die!', "Assassin's Creed II", 'Company of Heroes Opposing Fronts', 'Psychonauts', 'Company of Heroes 2', 'Magicka', 'Natural Selection 2', 'Sanctum 2', 'Serious Sam 3 BFE', 'Grand Theft Auto V', 'Insurgency', 'S.T.A.L.K.E.R. Shadow of Chernobyl', 'S.T.A.L.K.E.R. Call of Pripyat', 'Saints Row The Third', 'Far Cry 3', 'S.T.A.L.K.E.R. Clear Sky', 'Rocket League', 'Prototype', 'Dying Light', 'Just Cause 2', "Mirror's Edge", 'Portal 2', 'Deus Ex Human Revolution', 'Middle-earth Shadow of Mordor', 'Tropico 4', 'F.E.A.R.', 'South Park The Stick of Truth', 'Saints Row IV', 'Half-Life 2', 'The Talos Principle', 'DiRT 3', 'FTL Faster Than Light', 'Gunpoint', 'Metro 2033', "Assassin's Creed III", 'Far Cry 3 Blood Dragon', 'Burnout Paradise The Ultimate Box', 'Rogue Legacy', 'From Dust', 'Nidhogg', 'Dishonored', 'Half-Life 2 Episode One', 'Wolfenstein The New Order', 'Metro Last Light', 'Miasmata', 'Hotline Miami', 'Crypt of the NecroDancer', 'F.E.A.R. 2 Project Origin', 'The Binding of Isaac', 'METAL GEAR RISING REVENGEANCE', 'The Vanishing of Ethan Carter', 'Mass Effect', 'METAL GEAR SOLID V GROUND ZEROES', 'Banished', 'Battlestations Midway', 'HOARD', 'Sunless Sea', 'Grow Home', 'FEZ', 'Borderlands 2', 'Shadowgrounds', 'Trine', 'Symphony', 'Far Cry 2', 'The Stanley Parable', 'Osmos', 'Oil Rush', 'Dark Souls Prepare to Die Edition', 'Gravity Ghost', 'Rock of Ages', 'Amnesia The Dark Descent', 'Frozen Synapse', 'Dead Island', 'Superbrothers Sword & Sworcery EP', 'GRID 2', 'Strike Vector', 'Prison Architect', 'Outlast', 'Valkyria Chronicles', 'Proteus', 'Spelunky', "Tom Clancy's Splinter Cell Chaos Theory", 'Need for Speed Hot Pursuit', 'Reus', 'Saints Row 2', 'Super Meat Boy', 'Dustforce', 'System Shock 2', 'And Yet It Moves', 'Battlefield Bad Company 2', 'Call of Duty Modern Warfare 2', '140', 'Alice Madness Returns', 'Amnesia A Machine for Pigs', 'Anachronox', 'Antichamber', 'Audiosurf', 'Beat Hazard', 'Betrayer', 'Borderlands', 'Braid', 'Bulletstorm', 'Capsized', 'Cities Skylines', 'Dead Island Riptide', 'Dead Space 2', 'Dear Esther', 'Deus Ex Invisible War', 'Devil May Cry 4', 'DmC Devil May Cry', 'E.Y.E Divine Cybermancy', 'Endless Space', 'F.E.A.R. 3', 'F.E.A.R. Extraction Point', 'F.E.A.R. Perseus Mandate', 'Fallout 3', 'Far Cry', 'Gods Will Be Watching', 'Gone Home', 'Gothic', 'Gothic 3', 'GRID', 'Half-Life', 'Hitman 2 Silent Assassin', 'Hitman Blood Money', 'Hitman Codename 47', 'Hitman Contracts', 'How to Survive', 'I am Bread', 'Just Cause', 'Kane & Lynch 2 Dog Days', 'Kerbal Space Program', 'Kingdoms of Amalur Reckoning', 'Lara Croft and the Guardian of Light', 'LEGO Batman The Videogame', 'LIMBO', 'Little Inferno', 'Mass Effect 2', 'Mercenary Kings', 'Mini Ninjas', 'MURDERED SOUL SUSPECT', 'PAYDAY 2', 'POSTAL 2', 'RAGE', 'Red Faction Armageddon', 'Rochard', 'Scribblenauts Unlimited', 'Shadowrun Returns', 'Shadow Warrior', 'Shank', 'Sins of a Solar Empire Rebellion', 'Star Wars Knights of the Old Republic', 'Star Wars The Force Unleashed II', 'Star Wars Jedi Knight Jedi Academy', 'Star Wars Republic Commando', 'Star Wars Starfighter', 'Syberia', 'Terraria', "The Beginner's Guide", 'The Binding of Isaac Rebirth', 'The Incredible Adventures of Van Helsing II', 'The Last Remnant', 'The Lord of the Rings War in the North', 'The Swapper', 'The Witcher 3 Wild Hunt', 'Thief', 'This War of Mine', 'Thomas Was Alone', 'Titan Quest', 'Titan Quest Immortal Throne', 'Torchlight', 'Total War SHOGUN 2', 'Transistor', 'Dungeon Defenders', 'Call of Duty Black Ops', 'Day of Defeat Source', 'Empire Total War', 'ARK Survival Evolved', 'TERA', 'Rust', 'Loadout', 'Neverwinter', 'Warframe', 'Max Payne 2 The Fall of Max Payne', 'Mafia II', 'Europa Universalis III', 'Painkiller Overdose', 'Batman Arkham Origins', 'Enclave', 'Machinarium', 'X2 The Threat', 'X3 Reunion', 'X Beyond the Frontier', 'Hotline Miami 2 Wrong Number', 'Deadpool', 'Counter-Strike Condition Zero', 'Counter-Strike', 'Mount & Blade Warband', 'SMITE', 'Infinite Crisis', 'Half-Life Blue Shift', 'Project CARS', 'Defense Grid The Awakening', 'Ghostbusters The Video Game', 'Quantum Conundrum', "Alan Wake's American Nightmare", 'The Ball', 'Torchlight II', 'Botanicula', 'Penumbra Overture', 'Costume Quest 2', 'Midnight Club II', 'RoboBlitz', 'The Elder Scrolls III Morrowind', 'Worms Reloaded', 'FlatOut Ultimate Carnage', 'Sherlock Holmes Nemesis', 'Bejeweled 3', 'The Book of Unwritten Tales', 'The Movies', 'Bully Scholarship Edition', 'Indigo Prophecy', 'Aura Fate of the Ages', 'Penumbra Black Plague', 'Puzzle Agent', 'Octodad Dadliest Catch', 'TRAUMA', 'Plain Sight', 'Trine 2', 'Blur', 'Zeno Clash', 'The Longest Journey', "Sid Meier's Civilization IV", 'Prince of Persia', 'Aliens vs. Predator', 'Darksiders II', 'Dreamfall The Longest Journey', 'Driver San Francisco', 'Forge', 'Hard Reset', 'Helldorado', 'Homefront', 'Jurassic Park The Game', 'Kane & Lynch Dead Men', 'Legend of Grimrock', 'Papo & Yo', 'Secret Files Tunguska', "Sid Meier's Civilization IV Beyond the Sword", "Sid Meier's Civilization IV Warlords", 'Sniper Ghost Warrior', 'Still Life', 'Supreme Commander 2', 'The Chronicles of Riddick Assault on Dark Athena', 'The Novelist', 'Tomb Raider Anniversary', 'Tomb Raider Chronicles', 'Tomb Raider Legend', "Tom Clancy's Splinter Cell Conviction", 'Vampire The Masquerade - Bloodlines', 'Wolfenstein', 'H1Z1', 'Commandos 3 Destination Berlin', 'Battlefield Bad Company 2 Vietnam', 'Tribes Ascend', 'Velvet Assassin', 'Napoleon Total War', 'Aion', 'Arma 3', 'Blacklight Retribution', 'Red Orchestra Ostfront 41-45', 'Stronghold 3', 'R.U.S.E.', 'Anomaly Warzone Earth', 'XCOM Enemy Unknown', 'PlanetSide 2', "Don't Starve", 'Batman Arkham City', 'EVE Online', 'Anno 2070', 'Achron', 'Halo Spartan Assault', 'Dungeon Siege', 'Alpha Protocol', 'BRINK', 'Crysis', 'Crysis Warhead', 'Darkspore', 'Deus Ex Human Revolution - The Missing Link', 'Dungeon Siege III', 'Grand Theft Auto San Andreas', 'Grand Theft Auto Vice City', 'Grand Theft Auto III', 'Overlord', 'Red Faction', 'Red Faction II', "Tom Clancy's Ghost Recon Advanced Warfighter 2", 'Two Worlds II', 'Medieval II Total War', 'Defiance', 'Startopia', 'Call of Duty Modern Warfare 3', 'Battlefield 2', 'Men of War', 'Wargame European Escalation', 'Full Spectrum Warrior', 'DiRT Rally', 'Men of War Vietnam', 'XCOM Enemy Within', 'Tropico 5', 'Section 8', 'The Forest', 'Firefall', 'Football Manager 2013', 'Age of Empires Online', 'Champions Online', 'EverQuest II', 'Puzzle Pirates', 'Star Trek Online', 'Medieval II Total War Kingdoms', 'LEGO Jurassic World', 'Gotham City Impostors', 'Galactic Civilizations III', 'Total War ATTILA', 'Endless Legend', 'Homeworld Remastered Collection', 'Darwinia', 'RISK Factions', 'Crusader Kings II', 'Supreme Commander Forged Alliance', 'Europa Universalis IV', 'Earth 2160', 'Wargame AirLand Battle', 'Among the Sleep', 'SiN Episodes Emergence', 'DOOM 3 Resurrection of Evil', 'DOOM 3', "Sid Meier's Civilization V Brave New World", 'Supreme Commander', 'Total War SHOGUN 2 - Fall of the Samurai', 'Wasteland 2', 'Sniper Ghost Warrior 2', "Sid Meier's Civilization Beyond Earth", 'Thief Deadly Shadows', 'Magicka Wizard Wars', 'Fable III', 'The Escapists', 'Commandos 2 Men of Courage', 'Lords Of The Fallen', 'Space Hulk', 'Lost Planet Extreme Condition', 'Trials Fusion', 'Magic The Gathering - Duels of the Planeswalkers', 'War of the Roses', 'Rome Total War', "Tom Clancy's Rainbow Six 3 Athena Sword", 'Football Manager 2012', 'Football Manager 2015', 'F1 2012', 'Dragon Age Origins', 'Borderlands The Pre-Sequel', 'Prince of Persia The Forgotten Sands', 'Prince of Persia The Sands of Time', 'Elite Dangerous', 'StarDrive 2', 'Offworld Trading Company', 'Football Manager 2014', 'Test Drive Unlimited 2', 'Stronghold 2', 'Stronghold Legends', 'FINAL FANTASY XI', "Tom Clancy's Rainbow Six Siege", "Tom Clancy's Rainbow Six Vegas", 'Shovel Knight', 'Styx Master of Shadows', 'Shift 2 Unleashed', 'Guild Wars', 'Legacy of Kain Defiance', 'Legacy of Kain Soul Reaver 2', 'Worms Blast', 'Poker Night 2', 'Serious Sam HD The First Encounter', 'Risen', 'Painkiller Hell & Damnation', 'Minimum', 'Strike Suit Zero', 'FlatOut 2', 'Call of Cthulhu Dark Corners of the Earth', 'Demigod', 'DiRT', 'FlatOut', 'Mafia', 'Quake 4', 'The Darkness II', 'The Political Machine', 'Prime World', 'Strider', 'Dungeons & Dragons Chronicles of Mystara', "King's Bounty The Legend", 'Leviathan Warships', 'God Mode', 'SOMA', 'Retrovirus', 'Fallout 2', 'Call of Duty World at War', 'Dead Rising 2', 'The Bureau XCOM Declassified', 'Before the Echo', 'Divinity Dragon Commander', 'GRID Autosport', 'Bionic Commando Rearmed', 'Blackguards', 'Blackguards 2', 'Citizens of Earth', 'Lost Planet 3', 'Max Payne', 'Operation Flashpoint Dragon Rising', 'Operation Flashpoint Red River', 'Prince of Persia The Two Thrones', 'Prince of Persia Warrior Within', 'Rise of the Argonauts', 'X-COM Enforcer', 'Call of Duty 4 Modern Warfare', 'Space Hack', "Baldur's Gate Enhanced Edition", "Baldur's Gate II Enhanced Edition", 'Redshirt', 'Hearts of Iron III', 'Cities in Motion', 'Mount & Blade', 'The Incredible Adventures of Van Helsing', 'Street Fighter IV', "Sid Meier's Railroads!", 'World in Conflict Soviet Assault', 'Space Empires V', 'World in Conflict', 'Bejeweled Twist', 'Just Cause 3', 'Warhammer End Times - Vermintide', 'IL-2 Sturmovik Cliffs of Dover', 'Sniper Elite', 'Divinity Original Sin', 'Dungeon of the Endless', "Tom Clancy's EndWar", 'Guild of Dungeoneering', "Sid Meier's Starships", 'Evil Genius', 'Pillars of Eternity', 'Nosferatu The Wrath of Malachi', 'Judge Dredd Dredd vs Death', 'Titan Souls', 'Bionic Commando', 'Call of Juarez Bound in Blood', 'CONSORTIUM', 'Dark Void', 'Duke Nukem Manhattan Project', 'Eldritch', 'Jade Empire Special Edition', 'KickBeat Steam Edition', 'Knock-knock', 'Magrunner Dark Pulse', 'Q.U.B.E.', 'Return to Castle Wolfenstein', 'Rise of the Triad', "Sid Meier's Civilization IV Colonization", 'To the Moon', 'Lucius', "Hunted The Demon's Forge", 'Beyond Good & Evil', 'Bound By Flame', 'Contrast', 'Runaway The Dream of the Turtle', 'Disciples III Renaissance', 'Age of Wonders III', 'Lichdom Battlemage', 'Age of Wonders Shadow Magic', 'Hostile Waters Antaeus Rising', 'The Secret World', 'Darkest Dungeon', 'Xenonauts', "Tom Clancy's Rainbow Six Vegas 2", 'Medal of Honor Airborne', 'Condemned Criminal Origins', 'Earth Defense Force Insect Armageddon', 'Call of Juarez The Cartel', 'City of Heroes', 'Quake III Team Arena', "Tom Clancy's Ghost Recon Advanced Warfighter", 'X-Blades', 'Eurofighter Typhoon', 'Call of Duty 2', 'F1 2013', 'World War III Black Gold', 'Grim Dawn', 'Subnautica', 'Battlestations Pacific', 'FINAL FANTASY XIV Heavensward', 'World War II Panzer Claws', 'Devil May Cry 3 Special Edition', 'Lost Planet 2', 'Call of Duty', 'Call of Duty United Offensive', 'DeathSpank', 'Warhammer Online Age of Reckoning', 'Hatoful Boyfriend', 'Grey Goo', 'Beyond Divinity', 'Divine Divinity', 'Grim Fandango Remastered', "Sid Meier's Civilization Beyond Earth - Rising Tide", 'Silent Hill Homecoming', 'NBA 2K9', 'A Bird Story', 'Krater', 'Unreal II The Awakening', 'Unreal Tournament 2004', 'DeathSpank Thongs Of Virtue', "Tom Clancy's Splinter Cell", "Tom Clancy's Splinter Cell Double Agent", 'Universe at War Earth Assault', 'Alien Shooter Vengeance', 'Railroad Tycoon 3', 'DarkStar One', 'Grand Ages Rome', 'Tropico', 'Tropico 2 Pirate Cove', 'Order of War', 'StarDrive', 'Her Story', 'The Magic Circle', 'Hand Of Fate', 'MASSIVE CHALICE', 'Mushroom 11', 'Unstoppable Gorg', 'Shadowrun Hong Kong', 'Apotheon', 'Anomaly 2', 'Earth 2150 Lost Souls', 'Guild Wars Nightfall', 'Marine Sharpshooter II Jungle Warfare', 'Layers of Fear', 'Section 8 Prejudice', 'Fahrenheit Indigo Prophecy Remastered', 'Dragon Age II', "Brothers in Arms Hell's Highway", 'Arx Fatalis', 'TowerFall Ascension', 'UFO Afterlight', 'Theatre of War', 'Sacred 3', 'Daylight', 'Manhunt', 'Enemy Territory Quake Wars', 'Empires Dawn of the Modern World', 'ShootMania Storm', 'Cossacks II Napoleonic Wars', 'American Conquest', 'Cossacks Back to War', 'Cossacks European Wars', 'Knights of Honor', 'Act of War Direct Action', 'Call of Juarez', 'Dawn of Discovery', 'Faces of War', 'Gray Matter', 'Imperial Glory', 'Praetorians', 'NBA 2K13', 'The Amazing Spider-Man 2', 'The Path', 'Assault Android Cactus', 'Silent Hunter III', 'Freedom Force', 'Infernal', 'Project Snowblind', 'Rogue Trooper', 'Choplifter HD', 'Dungeons 2', 'Comanche 4', 'Silverfall', 'East India Company', 'Heroes Over Europe', 'Pacific Storm Allies', 'Pacific Storm', 'A Valley Without Wind', 'Incoming Forces', 'Crysis 2', 'Batman Arkham Asylum', 'Frontlines Fuel of War', 'TimeShift', 'Slender The Arrival', 'AquaNox', 'AquaNox 2 Revelation', 'Descent 3', 'Blood Bowl 2', 'The UnderGarden', 'Tycoon City New York', 'Chrome', 'Post Mortem', 'Still Life 2', 'The Flame in the Flood', 'Resonance', 'Your Doodles Are Bugged!', 'Summoner', "Shad'O", 'Foul Play', 'Shadowgate', 'Cities XL', 'Shattered Union', 'Anno 2205', 'Fantasy Wars', "Chris Sawyer's Locomotion", 'The Golf Club', 'Thunder Wolves', 'Stubbs the Zombie in Rebel Without a Pulse', 'BloodRayne', 'BloodRayne 2', 'O.R.B.', 'The Masterplan', 'Ashes of the Singularity', 'Silent Storm', "Tom Clancy's Rainbow Six Lockdown", 'The Settlers 7 Paths to a Kingdom', 'Age of Conan Rise of the Godslayer', 'Arma Combat Operations', 'Blazing Angels Squadrons of WWII', 'Loki', 'Silent Hunter 5 Battle of the Atlantic', 'EverQuest II Rise of Kunark', 'Legends of Eisenwald', 'Warrior Kings Battles', 'Brothers in Arms Earned in Blood', 'Brothers in Arms Road to Hill 30', 'LEGO Indiana Jones The Original Adventures', 'Elven Legacy', 'Etherlords II', 'Etherlords', 'Blacklight Tango Down', 'Microsoft Flight', 'Road Not Taken', 'Blade Kitten', 'Safecracker The Ultimate Puzzle Adventure', 'Venetica', 'Impossible Creatures', 'Watchmen The End Is Nigh', 'Nexus The Jupiter Incident', 'Silent Hunter Wolves of the Pacific', "Clive Barker's Jericho", 'UFO Aftermath', 'Port Royale 2', 'Echelon', 'Dracula 3 The Path of the Dragon', 'Dracula The Resurrection', 'Heroes of Annihilated Empires', "Tom Clancy's Ghost Recon", "Tom Clancy's Ghost Recon Desert Siege", "Tom Clancy's Ghost Recon Island Thunder", 'The Club', 'Treasure Planet Battle at Procyon', 'Advent Rising', 'Death to Spies', 'Death Track Resurrection', 'NecroVisioN', 'Soulbringer', 'Delta Force Black Hawk Down - Team Sabre', 'Delta Force Black Hawk Down', 'Pro Evolution Soccer 2014', 'SpellForce 2 Shadow Wars', 'FLOCK!', 'Puzzle Quest 2', 'UFO Aftershock', 'Blazing Angels 2 Secret Missions of WWII', 'NBA 2K11', 'GUN', 'Armello', 'Dangerous Waters', 'Halo Spartan Strike', 'Pro Evolution Soccer 2013', 'Lords of the Realm III', 'Puzzle Quest Galactrix', 'Shadow Ops Red Mercury', 'Jack Keane', 'Escape Dead Island', 'Space Siege', 'A Vampyre Story', 'Kohan Immortal Sovereigns', 'Worldwide Soccer Manager 2009', 'Kohan II Kings of War', 'Space Colony']
    api = WebAPI(key="D2161D6E2E2A13C22B412FD5E158DE52")
    #checks to make sure there is actually an input in steamID
    if steamID is not False:
        #calling the api
        games = api.IPlayerService.GetOwnedGames(steamid=steamID, include_appinfo=True,include_played_free_games=True, appids_filter=False, include_free_sub=True)
        game1 = games.get('response')
        finalGame = game1.get('games')
        #checks if the user's steam account can be used with the api
        if finalGame is not None:
            gamePlaytime = {}
            #loop to create a dictionary with the user's games and their playtime 
            for game in finalGame:
                gamePlaytime.update({game.get('name'): game.get('playtime_forever')})
            #sorting the dictonary so that the most played games are first
            sorted_list = sorted(gamePlaytime.items(), key=lambda x: x[1], reverse=True)
            finalDict = collections.OrderedDict(sorted_list)
            #loop to find the most played game that is in our dataset 
            for a in finalDict:
                if a in Game:
                  userGame = a
                  break
            #using the found game and calling the algorithm to get prediction
            pred = algorithm.getUserInput(userGame)
            g1 = pred[0]
            g2 = pred[1]
            #returning the recommend games to the results page and sending user there
            return render_template("results.html", game1=g1, game2=g2)
        else:
            #if the account is inelgible, send the user to input manually their game
            return redirect('manualLogin')
    else:
        #if login fails, send user to api page to try again
        return redirect('/apiLogin')

#routing to rating explaination page
@app.route("/ratings")
def ratings():
    #getting the top games and their scores from the algorithm and sending the information to the page
    topGames = algorithm.getTopGames()
    tG1 = topGames[0]
    tG2 = topGames[1]
    tG3 = topGames[2]
    sG1 = topGames[3]
    sG2 = topGames[4]
    sG3 = topGames[5]
    return render_template(r"/welcomePlus/ratings.html", topGame1 = tG1, topGame2 = tG2, topGame3 = tG3, sumGame1 = sG1, sumGame2 = sG2, sumGame3 = sG3)

#routing to the feedback page
@app.route("/feedback")
def feedback():
    return render_template(r"/welcomePlus/feedbacks.html")

#parameters for runnign the web application 
if __name__ == "__main__":
    app.secret_key = 'super secret key'
    os.environ['Flask_ENV'] = 'development'
    app.run(host='localhost', port = 8080, ssl_context='adhoc', debug=False)